<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mini Fighter: Endless Mission</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="app">
      <canvas id="game" width="1280" height="720" aria-label="Space shooter game"></canvas>

      <div id="hud">
        <div class="hud-left">
          <div class="hud-row"><span>Hull</span><span id="hud-hull">0</span></div>
          <div class="hud-row"><span>Armor</span><span id="hud-armor">0</span></div>
          <div class="hud-row"><span>Shields</span><span id="hud-shield">0</span></div>
        </div>
        <div class="hud-center">
          <div class="title">Mini Fighter Program</div>
          <div class="subtitle" id="hud-mission">Mission 1</div>
          <div class="boss-progress">
            <span id="boss-label">Boss ETA</span>
            <div class="boss-bar">
              <div id="boss-progress-fill"></div>
            </div>
          </div>
        </div>
        <div class="hud-right">
          <div class="hud-row"><span>Credits</span><span id="hud-credits">0</span></div>
          <div class="hud-row"><span>Score</span><span id="hud-score">0</span></div>
          <div class="hud-row"><span>Timer</span><span id="hud-time">00:00</span></div>
          <div class="hud-row"><span>Item 1</span><span id="hud-item-1">-</span></div>
          <div class="hud-row"><span>Item 2</span><span id="hud-item-2">-</span></div>
        </div>
      </div>

      <div id="overlay">
        <div class="panel" id="hangar">
          <h1>Mothership Hangar</h1>
          <p>
            The mothership carries millions of mini fighters, but elite pilots earn the right to fly
            advanced tech. Survive longer to earn credits and refit your ship.
          </p>
          <div class="stats-grid">
            <div>
              <div class="label">Pilot Rank</div>
              <div id="pilot-rank">Rookie</div>
            </div>
            <div>
              <div class="label">Available Credits</div>
              <div id="available-credits">0</div>
            </div>
            <div>
              <div class="label">Lifetime Credits</div>
              <div id="lifetime-credits">0</div>
            </div>
            <div>
              <div class="label">Last Mission</div>
              <div id="last-mission">N/A</div>
            </div>
            <div>
              <div class="label">Debug</div>
              <label class="toggle">
                <input type="checkbox" id="debug-unlock" />
                <span>Unlock All Levels</span>
              </label>
              <label class="toggle">
                <input type="checkbox" id="debug-invincible" />
                <span>Invincible</span>
              </label>
              <button id="reset-btn" class="ghost small">Reset Progress</button>
            </div>
          </div>
          <div class="tab-bar" role="tablist" aria-label="Hangar tabs">
            <button class="tab-btn active" data-tab="loadout" role="tab" aria-selected="true">
              Ship Loadout
            </button>
            <button class="tab-btn" data-tab="economy" role="tab" aria-selected="false">
              Economy
            </button>
            <button class="tab-btn" data-tab="mission" role="tab" aria-selected="false">
              Mission Select
            </button>
            <button class="tab-btn" data-tab="compendium" role="tab" aria-selected="false">
              Drone Compendium
            </button>
          </div>

          <div class="tab-panel" id="tab-loadout" data-tab-panel="loadout">
            <div class="loadout">
              <h2>Ship Upgrades</h2>
              <p class="investments-desc">
                Click a module to configure your ship. (Combat wiring comes in later overhaul steps.)
              </p>
              <div class="ship-upgrades" id="ship-upgrades-panel">
                <div class="ship-upgrades-grid">
                  <div class="ship-canvas" aria-label="Ship upgrade layout">
                    <img
                      class="ship-bg"
                      src="assets/SpaceShooterRedux/PNG/playerShip2_blue.png"
                      alt=""
                      aria-hidden="true"
                    />
                    <button class="ship-node gun" type="button" data-ship-node="gun">
                      <span class="ship-node-title">Gun</span>
                      <span class="ship-node-value" id="ship-gun-value">-</span>
                    </button>
                    <button class="ship-node flow" type="button" data-ship-node="flow">
                      <span class="ship-node-title">Flow</span>
                      <span class="ship-node-value" id="ship-flow-value">-</span>
                    </button>
                    <button class="ship-node ammo" type="button" data-ship-node="ammo">
                      <span class="ship-node-title">Ammo</span>
                      <span class="ship-node-value" id="ship-ammo-value">-</span>
                    </button>
                    <button class="ship-node effects" type="button" data-ship-node="effects">
                      <span class="ship-node-title">Effects</span>
                      <span class="ship-node-value" id="ship-effects-value">-</span>
                    </button>
                    <button class="ship-node defenses" type="button" data-ship-node="defenses">
                      <span class="ship-node-title">Defenses</span>
                      <span class="ship-node-value" id="ship-defenses-value">-</span>
                    </button>
                  </div>
                  <div class="ship-stats" id="ship-stats" aria-label="Ship stats"></div>
                </div>
              </div>
            </div>

            <div class="loadout">
              <h2>Ability Slot</h2>
              <p class="investments-desc">Choose your mission ability (RMB / ALT button).</p>
              <div class="tree-nodes" id="tree-aux-select"></div>
            </div>

            <div class="loadout">
              <h2>Mission Items</h2>
              <p class="investments-desc">Equip consumables purchased in the Economy tab.</p>
              <div class="consumable-slots">
                <div class="consumable-slot">
                  <span class="label">Slot 1</span>
                  <span id="consumable-slot-1">Empty</span>
                  <button id="clear-slot-1" class="ghost small">Clear</button>
                </div>
                <div class="consumable-slot">
                  <span class="label">Slot 2</span>
                  <span id="consumable-slot-2">Empty</span>
                  <button id="clear-slot-2" class="ghost small">Clear</button>
                </div>
              </div>
              <div class="upgrade-list" id="consumable-equip-list"></div>
            </div>

            <div class="actions">
              <button id="select-mission-btn">Select Mission</button>
            </div>
          </div>

          <div class="tab-panel" id="tab-economy" data-tab-panel="economy" hidden>
            <div class="loadout investments-section">
              <h2>Fleet Investments</h2>
              <p class="investments-desc">
                Invest in mothership infrastructure for long-term benefits. Returns compound over time.
              </p>
              <div class="investment-categories">
                <div class="investment-category" id="engineering-bay">
                  <div class="category-header">
                    <span class="category-icon">ðŸ”§</span>
                    <span class="category-name">Engineering Bay</span>
                    <span class="category-tier" id="engineering-tier">Tier 0/5</span>
                  </div>
                  <p class="category-desc">Unlock consumables and reduce repair costs.</p>
                  <div class="category-benefits" id="engineering-benefits"></div>
                  <button class="invest-btn" id="engineering-invest" disabled>
                    <span class="invest-label">Invest</span>
                    <span class="invest-cost" id="engineering-cost">200</span>
                  </button>
                </div>
                <div class="investment-category" id="operations-center">
                  <div class="category-header">
                    <span class="category-icon">ðŸ“¡</span>
                    <span class="category-name">Operations Center</span>
                    <span class="category-tier" id="operations-tier">Tier 0/5</span>
                  </div>
                  <p class="category-desc">Unlock mission variants and bonus objectives.</p>
                  <div class="category-benefits" id="operations-benefits"></div>
                  <button class="invest-btn" id="operations-invest" disabled>
                    <span class="invest-label">Invest</span>
                    <span class="invest-cost" id="operations-cost">200</span>
                  </button>
                </div>
                <div class="investment-category" id="fleet-shares">
                  <div class="category-header">
                    <span class="category-icon">ðŸ’°</span>
                    <span class="category-name">Fleet Shares</span>
                    <span class="category-tier" id="shares-tier">Tier 0/5</span>
                  </div>
                  <p class="category-desc">Earn passive dividends from fleet operations.</p>
                  <div class="category-benefits" id="shares-benefits"></div>
                  <button class="invest-btn" id="shares-invest" disabled>
                    <span class="invest-label">Invest</span>
                    <span class="invest-cost" id="shares-cost">300</span>
                  </button>
                </div>
              </div>
            </div>
            <div class="loadout">
              <h2>Hangar Store</h2>
              <p class="investments-desc">Purchase consumables for your next mission.</p>
              <div class="upgrade-list" id="consumable-store"></div>
            </div>
          </div>

          <div class="tab-panel" id="tab-mission" data-tab-panel="mission" hidden>
            <h2>Mission Briefing</h2>
            <p>Select a mission profile. Each sortie increases in difficulty.</p>
            <div class="mission-grid" id="level-list"></div>
            <div class="actions">
              <button id="launch-btn">Launch Mission</button>
            </div>
          </div>

          <div class="tab-panel" id="tab-compendium" data-tab-panel="compendium" hidden>
            <h2>Enemy Drone Compendium</h2>
            <p class="investments-desc">
              Field intel on hostile drones. (In the full game, entries unlock as you encounter them.)
            </p>
            <div class="compendium-toolbar">
              <input id="compendium-search" class="compendium-search" type="search" placeholder="Search drones..." />
              <label class="toggle compact">
                <input type="checkbox" id="compendium-show-bosses" checked />
                <span>Show Bosses</span>
              </label>
            </div>
            <div class="compendium-grid" id="compendium-list"></div>
          </div>
        </div>

        <div class="panel" id="debrief" hidden>
          <h1>Mission Debrief</h1>
          <p id="debrief-text">Your ship was destroyed. Escape pod recovered.</p>
          <div class="stats-grid">
            <div>
              <div class="label">Time Survived</div>
              <div id="debrief-time">00:00</div>
            </div>
            <div>
              <div class="label">Enemies Destroyed</div>
              <div id="debrief-kills">0</div>
            </div>
            <div>
              <div class="label">Credits Earned</div>
              <div id="debrief-credits">0</div>
            </div>
          </div>
          <div class="actions">
            <button id="return-btn">Return to Hangar</button>
          </div>
        </div>
      </div>

      <div id="controls">
        <span>Move: Mouse</span>
        <span>Fire: LMB</span>
        <span>Alt: RMB</span>
        <span>Eject: E</span>
        <span>Pause: P</span>
      </div>

      <div id="mobile-controls" aria-hidden="true" hidden>
        <button class="mobile-btn item slot1" id="mobile-item-1">Item 1</button>
        <button class="mobile-btn item slot2" id="mobile-item-2">Item 2</button>
        <button class="mobile-btn alt" id="mobile-alt">
          <img class="mobile-icon" id="mobile-alt-icon" alt="" />
          <span class="mobile-label" id="mobile-alt-label"></span>
        </button>
        <button class="mobile-btn eject" id="mobile-eject">Eject</button>
        <button class="mobile-btn launch" id="mobile-launch">Launch</button>
      </div>

      <div class="modal" id="ship-modal" hidden>
        <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="ship-modal-title">
          <div class="modal-header">
            <h3 id="ship-modal-title">Ship Module</h3>
            <button class="ghost small" id="ship-modal-close" type="button">Close</button>
          </div>
          <div class="modal-body" id="ship-modal-body"></div>
        </div>
      </div>
    </div>

    <script src="main.js"></script>
  </body>
</html>
